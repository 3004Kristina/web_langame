(()=>{const a=[112,48,96,113,49,97,114,50,98,115,51,99,116,52,100,117,53,101,118,54,102,119,55,103,120,56,104,121,57,105,122,123,8,9,46,13];jQuery.fn.extend({codeInput(e={}){let t=e.inputCount||4,r=e.inputWrapperClass||"code_input_wrapper";jQuery(this).each(function(){let i=jQuery(this),n=jQuery(`<div class="${r}"></div>`);for(let e=0;e<t;++e){let e=jQuery('<input type="text" maxlength="1">');e.on("keydown",function(e){var t=e.keyCode||e.which;-1===a.indexOf(t)&&e.preventDefault()}),e.on("keyup input",function(e){let t=jQuery(this),r=e.keyCode||e.which,a="";n.find("input").each(function(){a+=jQuery(this).val()}),i.val(a),8!==r&&46!==r?("input"===e.type&&i.trigger("input"),1===t.val().length&&(0<t.next("input").length?t.next("input").trigger("focus"):"input"===e.type&&setTimeout(()=>{i.trigger("change")},50))):t.val("").prev("input").trigger("focus")}),n.append(e)}i.hide(),i.after(n)})}}),jQuery(function(){jQuery("[data-input-code]").codeInput()})})(),jQuery.fn.extend({formWizard(e={}){let i=this,n=e.inputWrapperSelector||".form-group",o=e.inputErrorSelector||".error",t=e.submitButtonSelector||'[type="submit"]',r=e.prevButtonSelector||'[data-role="prev-tab-button"]',u=e.prevButtonText||"Назад",a=e.nextButtonSelector||'[data-role="next-tab-button"]',l=e.nextButtonText||"Вперед",c=e.tabSelector||'[data-role="tabs"]',s=e.activeTab||0,d=i.find(t),p=i.find(r),_=i.find(a),f=i.find(c);return f.length<=1?null:(b(s),_.on("click",y),p.on("click",h),this.on("input change","input, textarea, select",function(){v(this,"")}),i.data("form-wizard",{showTab:b,goToNextTab:y,goToPrevTab:h,validateActiveTab:m}),{showTab:b,goToNextTab:y,goToPrevTab:h,validateActiveTab:m});function b(e){let t=f.hide().eq(e).show(),r=t.data("prev-button-text")||u,a=t.data("next-button-text")||l;d.toggle(e===f.length-1),p.toggle(0<e).text(r),_.toggle(e<f.length-1).text(a),s=e,i.trigger("show-tab",[s])}function y(){s>=f.length-1||m().then(()=>{b(s+1)}).catch(()=>{i.trigger("error-tab")})}function h(){0!==s&&b(s-1)}function m(){let e=f.eq(s),t=function(){let a=f.eq(s);return new Promise((e,t)=>{let r=!1;return a.find("input, select, textarea").each(function(){v(this,"")}),a.find('input[required][type="text"]:not(:disabled),input[required][type="password"]:not(:disabled),input[required][type="email"]:not(:disabled),input[required][type="tel"]:not(:disabled),input[required][type="url"]:not(:disabled),input[required][type="number"]:not(:disabled),select[required]:not(:disabled),textarea[required]:not(:disabled)').each(function(){let e=jQuery(this),t=e.val();t||(r=!0,v(this,"Необходимо заполнить данное поле"))}),a.find('input[type="email"]:not(:disabled)').each(function(){let e=jQuery(this),t=e.val();t&&!1===/^.+@.+\..+$/.test(t)&&(r=!0,v(this,"Необходимо ввести валидный e-mail"))}),a.find('input[type="url"]:not(:disabled)').each(function(){let e=jQuery(this),t=e.val();t&&!1===/^.+\..+$/.test(t)&&(r=!0,v(this,"Необходимо ввести валидный url"))}),(r?t:e)()})}(),r="function"!=typeof e.data("form-wizard-tab-validation")||e.data("form-wizard-tab-validation")();return Promise.all([t,r])}function v(e,t){let r=jQuery(e).closest(n),a=r.find(o);r.toggleClass("has-error",!!t),a.text(t||"")}}}),jQuery(function(){let e=jQuery(".hide-from-search-form"),t=e.find('input[type="checkbox"]');0!==e.length&&t.on("change",function(e){jQuery.ajax({type:"POST",url:"",data:{status:t.prop("checked")?"hidden":"active"},success:function(){}})})}),jQuery(function(){let t=jQuery("body");jQuery(".mobile_menu_btn").on("click",function(e){e.preventDefault(),t.toggleClass("mobile-menu-opened")}),jQuery(".mobile_menu_bg").on("click",function(){t.removeClass("mobile-menu-opened")})}),window.Layout={initSelect2(){jQuery(".select2_wrapper select:not([data-select2-id]):not([data-select2-manual-init])").each(function(){let e=jQuery(this);e.select2({minimumResultsForSearch:1/0,placeholder:e.data("placeholder"),dropdownParent:e.closest(".select2_wrapper"),width:"100%"})}),jQuery(".pc_configuration_content_wrapper .select2_wrapper select").each(function(){let e=jQuery(this);e.select2({minimumResultsForSearch:1,placeholder:e.data("placeholder"),dropdownParent:e.closest(".select2_wrapper"),width:"100%"}).on("select2:opening",function(e){$(this).data("select2").$dropdown.find(":input.select2-search__field").attr("placeholder","Поиск...")})})}},jQuery(function(){let s=jQuery("#add-club-form"),e=s.find(".save_draft"),r=jQuery("#club_photos_input"),_=jQuery("#select-subway"),a=jQuery("#select-сity"),f=jQuery("#main_preview_photo_input"),i=jQuery("#add-photo-input"),n=jQuery("#add-price-file-input"),o=jQuery("#add-price-file-hidden-input"),u=jQuery("#add-price-file-text"),c=jQuery("#add_photo_preview"),d=jQuery("#add_photo_list"),b=[];if(0!==s.length){let t=s.formWizard({inputWrapperSelector:".form-group",inputErrorSelector:".error",submitButtonSelector:'[type="submit"]',prevButtonSelector:'[data-role="prev-tab-button"]',prevButtonText:"Назад",nextButtonSelector:'[data-role="next-tab-button"]',nextButtonText:"Продолжить",tabSelector:".form_tab"});function p(t){return new Promise((r,a)=>{let e=new FormData;e.append("file",t,t.name),jQuery.ajax({url:"/upload.php",method:"post",data:e,processData:!1,contentType:!1,success:function({data:e,error:t}){if(t)return a(t);r(e)}})})}function l(e,t){jQuery(e).each(function(){let e=jQuery(this);e.toggleClass("block_active",t),e.toggleClass("block_disabled",!t),e.find("input, select, textarea").each(function(){let e=jQuery(this);e.prop("disabled",!t),t||e.val("").trigger("change")})})}s.on("keydown","input",function(e){"Enter"===e.key&&(e.preventDefault(),t.goToNextTab())}),s.on("show-tab",function(e,t){jQuery(".person_add_club_modal_wrapper .remodal-wrapper").stop().animate({scrollTop:0},300)}),e.on("click",function(e){jQuery.ajax({type:"POST",url:"",data:s.serialize(),success:function(){jQuery('[data-remodal-id="success_modal"]').remodal().open()}})}),s.on("submit",function(e){e.preventDefault(),jQuery.ajax({type:"POST",url:"",data:s.serialize(),success:function(){jQuery('[data-remodal-id="success_modal"]').remodal().open()}})}),n.on("change",function(e){return 0===this.files.length?(o.val(""),void u.text("Загрузить файл")):void p(this.files[0]).then(e=>{o.val(e),u.text("Файл загружен")})}),_.find("option[data-city]").each(function(){let e=jQuery(this);b.push({id:this.value,text:e.text(),city:e.data("city"),lineColor:e.data("line-color")})}),_.html("<option></option>"),_.select2({minimumResultsForSearch:1/0,placeholder:_.data("placeholder"),dropdownParent:_.closest(".select2_wrapper"),width:"100%",data:[]}),a.on("change",function(){_.select2("destroy"),_.html("<option></option>"),_.select2({minimumResultsForSearch:1,placeholder:_.data("placeholder"),dropdownParent:_.closest(".select2_wrapper"),width:"100%",data:b.filter(({city:e})=>e===a.val())}).on("select2:opening",function(e){$(this).data("select2").$dropdown.find(":input.select2-search__field").attr("placeholder","Поиск...")})}),(()=>{let e=jQuery(".form_tab_08_club_formalization"),a=e.find(".add_photo_error"),n=r.val().split(":").filter(e=>!!e),o=f.val();function u(){a.text(""),r.val(n.join(":")),f.val(o||"").trigger("change"),o?c.html(`<img src="${o}"/>`):c.empty(),d.empty(),n.forEach(e=>{d.append(`
<div class="add_photo_item">
    <img src="${e}"/>
    <a href="#" class="remove_photo"></a>
</div>
`)})}function l(e){o=e}i.on("change",function(){let e=n.length;for(var t of this.files){if(10<=e)break;++e,p(t).then(e=>{!function(e){n.push(e),o||l(e);u()}(e)})}setTimeout(()=>i.attr("type","hidden"),0),setTimeout(()=>i.attr("type","file"),50)}),s.on("click",".add_photo_item .remove_photo",function(e){e.preventDefault();let t=jQuery(this),r=t.closest(".add_photo_item"),a=r.find("img"),i=a.attr("src");!function(e){n.splice(n.indexOf(e),1),e===o&&l(0<n.length?n[0]:null);u()}(i)}),s.on("click",".add_photo_item img",function(e){e.preventDefault();let t=jQuery(this),r=t.attr("src");l(r),u()}),u(),e.data("form-wizard-tab-validation",function(){return new Promise((e,t)=>{let r=!1;return a.text(""),o||(a.text("Необходимо загрузить хотя бы одну фотографию"),r=!0),(r?t:e)()})})})(),(()=>{let e=jQuery(".form_tab_04_schedule"),t=jQuery("input[data-week-schedule]"),r=jQuery("input[data-day-schedule]");e.on("change","input",function(e){0===r.filter(":checked").length&&t.is(":checked")?(jQuery(".next_btn, .prev_btn").prop("disabled",!0),jQuery(".work_time_wrapper .error").text("Необходимо заполнить хотя бы один день")):(jQuery(".next_btn, .prev_btn").prop("disabled",!1),jQuery(".work_time_wrapper .error").text(""))})})(),(()=>{let e=jQuery(".form_tab_06_price"),t=jQuery("input[data-payment-method]");e.on("change","input",function(e){0===t.filter(":checked").length?(jQuery(".next_btn, .prev_btn").prop("disabled",!0),jQuery(".payment_method_wrapper .error").text("Необходимо выбрать хотя бы один способ оплаты")):(jQuery(".next_btn, .prev_btn").prop("disabled",!1),jQuery(".payment_method_wrapper .error").text(""))})})(),jQuery('input[type="checkbox"][data-toggle-block]').on("change init",function(e){let t=jQuery(this),r=t.data("toggle-block"),a=this.checked;l(r,a)}).trigger("init"),jQuery('input[type="radio"][data-activate-block]').on("change init",function(e){let t=jQuery(this),r=t.data("activate-block");l(r,!0)}).filter(":checked").trigger("init"),jQuery('input[type="radio"][data-disable-block]').on("change init",function(e){let t=jQuery(this),r=t.data("disable-block");l(r,!1)}).filter(":checked").trigger("init"),(()=>{let t=jQuery('[data-role="pc-configuration"]'),a=t.find('[data-role="pc-configuration-nav"]'),i=t.find('[data-role="pc-configuration-tabs"]'),e=jQuery("#configuration-tab-template"),n=t.find('[data-role="pc-configuration-create-tab"]'),r=e.html(),o=i.find('[data-role="pc-configuration-tab"]').length,u=o-1,l=u;function c(e){i.find("[data-tab]").removeClass("active").filter(`[data-tab="${e}"]`).addClass("active"),a.find("[data-show-tab]").removeClass("active").filter(`[data-show-tab="${e}"]`).addClass("active"),l=e}0!==t.length&&(n.on("click",function(e){var t;e.preventDefault(),t=u+1,e=function(e){return r.replace(/\{n\}/g,`${e}`)}(t),i.append(e),a.append(`
                <li data-nav-tab="${t}">
                    <a href="#" data-show-tab="${t}"></a>
                    <button type="button" data-remove-tab="${t}"></button>
                </li>
            `),Layout.initSelect2(),c(t),u=t,++o,n.prop("disabled",5<=o)}),t.on("click","[data-show-tab]",function(e){e.preventDefault();let t=jQuery(this),r=t.data("show-tab");c(r)}),t.on("click","[data-remove-tab]",function(e){e.preventDefault();let t=jQuery(this),r=t.data("remove-tab");!function(e){a.find(`[data-nav-tab="${e}"]`).remove(),i.find(`[data-tab="${e}"]`).remove(),l===e&&c(0);--o,n.prop("disabled",5<=o)}(r)}),s.on("error-tab",function(){if(t.is(":visible")){let e=t.find(".tab .form-group.has-error").eq(0).closest(".tab");c(e.data("tab"))}}))})(),(()=>{let t=jQuery('[data-role="marketing-event-add-tab"]'),r=jQuery(".marketing_event .marketing_event_list"),a=r.find(".form-group").length;t.on("click",function(e){++a,r.append(`
             <div class="form-group" >
                <label for="marketing-event-input[${a}]">Акция №</label>
                <div class="input_wrapper" >
                    <input id="marketing-event-input[${a}]" name="marketing_event_descr[]" type="text" placeholder="Описание акции" required>
                    <div class="error"></div>
                </div>
                <button type="button" data-role-remove-marketing-event></button>
            </div>
            `),t.prop("disabled",5<=a)}),r.on("click","[data-role-remove-marketing-event]",function(e){e.preventDefault(),jQuery(this).closest(".form-group").remove(),--a,t.prop("disabled",5<=a)})})(),jQuery(window).on("scroll resize",function(){jQuery("[data-track-sticky]").each(function(){let e=jQuery(this),t=this.getBoundingClientRect().y;e.toggleClass("sticky",0===t).toggleClass("not-sticky",0!==t)})}),s.find("input,select,texarea").on("change",function(e){let t=jQuery("#club-name-input").val(),r=jQuery("#club-address-input").val(),a=jQuery("#min-price-input").val(),i=_.find("option:selected").text(),n=b.find(({id:e})=>e===_.val()),o=n?.lineColor||"black",u=jQuery("#qty_pc-input").val(),l=jQuery("#qty_console-input").val(),c=jQuery("#qty_vr-input").val(),s=jQuery("#qty_simulator-input").val(),d=jQuery('.marketing_event_wrapper .checkbox_wrapper input[type="checkbox"]'),p=f.val()||"/img/default-club-preview-image.svg";jQuery(".form_tab_09_club_preview .search_club_info .club_name span").text(t),jQuery(".form_tab_09_club_preview .club_address_wrapper .club_address").text(r),jQuery(".form_tab_09_club_preview .club_subway_wrapper .subway_station").text(i),jQuery(".form_tab_09_club_preview .club_subway_wrapper .subway_img_wrapper")[0].style.setProperty("--subway-color",o),jQuery(".form_tab_09_club_preview .club_price_wrapper .club_price span").text(a),jQuery(".form_tab_09_club_preview .club_features_item .club_features_qty.total_pc").text(u),""===l?jQuery(".club_features_qty.console").closest(".club_features_item").hide():(jQuery(".club_features_qty.console").closest(".club_features_item").show(),jQuery(".form_tab_09_club_preview .club_features_item .club_features_qty.console").text(l)),""===c?jQuery(".club_features_qty.vr").closest(".club_features_item").hide():(jQuery(".club_features_qty.vr").closest(".club_features_item").show(),jQuery(".form_tab_09_club_preview .club_features_item .club_features_qty.vr").text(c)),""===s?jQuery(".club_features_qty.autosim").closest(".club_features_item").hide():(jQuery(".club_features_qty.autosim").closest(".club_features_item").show(),jQuery(".form_tab_09_club_preview .club_features_item .club_features_qty.autosim").text(s)),jQuery(".form_tab_09_club_preview .search_club_img_wrapper .search_club_img img").attr("src",p),0<jQuery("input[data-food-service]").filter(":checked").length?jQuery(".form_tab_09_club_preview .club_services .food_services").show():jQuery(".form_tab_09_club_preview .club_services .food_services").hide(),jQuery(".form_tab_09_club_preview .club_services .drink__services").toggle(jQuery("input[data-alcohol-service]").prop("checked")),jQuery(".form_tab_09_club_preview .club_services .hookah_services").toggle(jQuery("input[data-hookah-service]").prop("checked")),jQuery(".form_tab_09_club_preview .club_services .vip_services").toggle(jQuery("input[data-vip-service]").prop("checked")),jQuery(".form_tab_09_club_preview .club_promotion").toggle(d.prop("checked")),!jQuery("input[data-alcohol-service]").prop("checked")&&!jQuery("input[data-hookah-service]").prop("checked")&&!jQuery("input[data-vip-service]").prop("checked")&&0<!jQuery("input[data-food-service]").filter(":checked").length?jQuery(".form_tab_09_club_preview .club_services").hide():jQuery(".form_tab_09_club_preview .club_services").show(),jQuery(".club_subway_wrapper").toggle(""!==_.val())})}}),jQuery(function(){let t=jQuery("#add-club-start-form"),r=jQuery("#add-club-code-confirm-form"),e=r.find(".step_back"),a,i;function n(e){var t=""+e%60;return""+Math.floor(e/60)+":"+(t=1===t.length?"0"+t:t)}0!==t.length&&(r.find('input[name="code"]').codeInput(),t.on("submit",function(e){e.preventDefault(),i=t.find('input[name="phone"]').val(),jQuery.ajax({type:"POST",url:"",data:t.serialize(),success:function(){t.hide(),r.find(".user_phone").text(i),r.show(),clearInterval(a),function(){clearInterval(a);let e=jQuery("#countdown"),t=jQuery("#reSendCode"),r=180;e.text(n(r)),t.addClass("disabled"),a=setInterval(function(){r--,e.text(n(r)),0===r&&(t.removeClass("disabled"),e.text(" "),clearInterval(a))},1e3)}()}})}),r.on("submit",function(e){e.preventDefault(),jQuery(".code_wrapper .error").text(""),jQuery.ajax({type:"POST",url:"",data:r.serialize(),success:function(e){e.error&&jQuery(".code_wrapper .error").text(e.error)}})}),e.on("click",function(e){r.trigger("reset"),r.hide(),t.show()}),jQuery("#reSendCode").on("click",function(e){t.trigger("submit")}))}),jQuery(function(){let e=document.getElementById("club_page_map");e&&window.ymaps&&ymaps.ready(()=>{new ymaps.Map(e,{center:[55.76,37.64],zoom:7})})}),jQuery(function(){let e=jQuery('[data-remodal-id="club_photo_modal"]'),r=jQuery(".club_photo_modal_wrapper"),a=jQuery("#show_club_photo_counter_slide");if(0!==e.length){let t=r.find(".slide_item").length;function i(e){a.text(`${e+1} / ${t}`)}i(0),e.on("opened",function(){r.slick({infinite:!0,slidesToShow:1,slidesToScroll:1,prevArrow:'<button type="button" class="slick-prev slick-arrow"><img src="/img/left.svg" alt="arrow"></button>',nextArrow:'<button type="button" class="slick-next slick-arrow"><img src="/img/right.svg" alt="arrow"></button>'}),r.on("beforeChange",function(e,t,r,a){i(a)})}),e.on("closed",function(){jQuery(".club_photo_modal_wrapper").slick("unslick")})}}),jQuery(function(){let t=jQuery("#user-profile-form"),a,r=t.find('input[name="phone"]'),i=t.find(".confirm_mobile_wrapper"),n=i.find(".confirm_mobile_descr"),o,u=t.find('input[name="phone"]').val();function l(){jQuery.ajax({type:"POST",url:"",data:t.serialize(),success:function(){jQuery('[data-remodal-id="success_modal"]').remodal().open()}})}function c(e){var t=""+e%60;return""+Math.floor(e/60)+":"+(t=1===t.length?"0"+t:t)}0!==t.length&&(t.find('input[name="code"]').codeInput(),t.on("submit",function(e){e.preventDefault(),o=r.val(),o!==u?jQuery.ajax({type:"POST",url:"",data:{phone:o},success:function(){jQuery(".user_profile_submit").addClass("disabled"),r.hide(),n.text(`Код отправлен на номер ${o}`).removeClass("error"),i.show(),clearInterval(a),function(){let e=jQuery("#countdown"),t=jQuery("#reSendCodeProfile"),r=180;e.text(c(r)),t.addClass("disabled"),a=setInterval(function(){r--,e.text(c(r)),0===r&&(t.removeClass("disabled"),e.text(" "),clearInterval(a))},1e3)}()}}):l()}),jQuery("#reSendCodeProfile").on("click",function(e){t.trigger("submit")}),t.on("change",'input[name="code"]',function(e){let t=jQuery(this);jQuery.ajax({type:"POST",url:"",data:{code:t.val()},success:function(e){e.error?n.text(e.error).addClass("error"):(l(),r.show(),i.hide(),clearInterval(a),jQuery(".user_profile_submit").removeClass("disabled"))}})}))}),jQuery(function(){Layout.initSelect2(),jQuery(".club_page_services_list .club_services_mobile_toggle").on("click",function(e){jQuery(this).toggleClass("active").closest(".club_page_services_list").toggleClass("mob_toggle").find(".mob_hide").toggleClass("active")}),jQuery('input[type="tel"]').inputmask({mask:"+7 (999) 999-99-99",onincomplete:function(){this.value=""}}),jQuery('input[type="number"]').on("input change",function(e){var t=+jQuery(this).val();(t<=0||isNaN(t))&&jQuery(this).val("")}),jQuery("ul.club_list_navigation_tabs li a").on("click",function(e){e.preventDefault();let t=jQuery(this),r=jQuery(t.attr("href"));t.is(".active")||(jQuery("ul.club_list_navigation_tabs li a.active").removeClass("active"),t.addClass("active"),r.show(),jQuery(".club_list_content_tabs .tab").not(r).hide())}),jQuery(".club_page_toggle_content").on("click",function(e){jQuery(this).closest(".toggle_block_wrapper").find(".toggle_block").toggle(),jQuery(this).toggleClass("active")}),jQuery(".review_content_wrapper").scrollbar(),jQuery(".person_add_club_modal").remodal({appendTo:jQuery(".person_add_club_modal_wrapper"),hashTracking:!1}),jQuery(".show_club_price_list_modal").remodal({appendTo:jQuery(".club_page_modals_wrapper"),hashTracking:!1,closeOnOutsideClick:!1}),jQuery(".show_club_photo_modal").remodal({appendTo:jQuery(".club_page_modals_wrapper"),hashTracking:!1,closeOnOutsideClick:!1}),jQuery(".club_page_reviews_list").slick({infinite:!1,slidesToShow:4,slidesToScroll:1,variableWidth:!0,prevArrow:'<button type="button" class="slick-prev slick-arrow"><img src="../../img/left1.svg" alt="arrow"></button>',nextArrow:'<button type="button" class="slick-next slick-arrow"><img src="../../img/right1.svg" alt="arrow"></button>',responsive:[{breakpoint:700,settings:{slidesToShow:1,slidesToScroll:1}}]})});
//# sourceMappingURL=layout.js.map
